# Example configuration for the web-hello deployment scripts
# Copy this file to `.env` and adjust the values for your environment.
# This file is ignored by Git and should not be committed with real secrets.

# Subscription and resource group (optional).  If SUBSCRIPTION_ID is
# omitted, the default subscription configured in the Azure CLI is used.
SUBSCRIPTION_ID=
RESOURCE_GROUP=rg-aca-platform-demo

# Name of the Azure Container Apps environment created by the infra repo
ACA_ENVIRONMENT=aca-env-demo

# Name for this container app instance.  Use a unique name per user to
# avoid clashes when deploying to shared environments.
APP_NAME=web-hello

# Fully qualified reference to your container image in ACR.  For
# example: acaregistrydemo1234.azurecr.io/web-hello:latest.  CI/CD
# pipelines will update this value automatically when pushing new
# images.
IMAGE=acaregistrydemo1234.azurecr.io/web-hello:latest

## Optional configuration values

# CPU and memory request/limit.  If omitted, defaults in the deploy
# script are used (0.5 CPU, 1Gi memory).
CPU=0.5
MEMORY=1Gi

# Application environment string injected into the container.
APP_ENV=production

# Minimum and maximum replicas for scaling.
MIN_REPLICAS=1
MAX_REPLICAS=5

# HTTP concurrency threshold for scaling (requests per replica).  The
# default is 50 concurrent requests【847155983420235†L660-L675】.
HTTP_CONCURRENCY=50

## Secret management

# To use a Key Vault secret for the database connection string, provide
# the secret URI (including version) and the resource ID of a
# user-assigned managed identity with access to the secret【209614643635596†L435-L505】.  When both
# values are set, the deploy script will generate a Key Vault reference
# instead of embedding the secret value.
# DB_SECRET_URI=https://<keyvault-name>.vault.azure.net/secrets/db-connection-string/<version>
# IDENTITY_RESOURCE_ID=/subscriptions/<sub>/resourceGroups/<rg>/providers/Microsoft.ManagedIdentity/userAssignedIdentities/<identity-name>

# Alternatively, provide the connection string directly.  **Do not use
# this in production**; prefer Key Vault for secrets.  If both
# DB_SECRET_URI and DB_CONNECTION_STRING are empty, the app will run
# without a database connection string.
# DB_CONNECTION_STRING=Server=tcp:...;Database=...;User ID=...;Password=...