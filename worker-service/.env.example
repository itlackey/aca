# Example configuration for the worker-service deployment
# Copy to `.env` and customise these values before deploying.  Do not
# commit real secrets to version control.

# Optional subscription ID.  If not provided, the current default
# subscription is used by the Azure CLI.
SUBSCRIPTION_ID=

# Resource group containing the Container Apps environment and app
RESOURCE_GROUP=rg-aca-platform-demo

# Name of the Container Apps environment (created via the infra repo)
ACA_ENVIRONMENT=aca-env-demo

# Name of the worker-service container app
APP_NAME=worker-service

# Fully qualified container image reference.  Replace with your ACR
# login server and tag.  CI/CD pipelines will update this value
# automatically when new images are built.
IMAGE=acaregistrydemo1234.azurecr.io/worker-service:latest

## Optional configuration parameters

# CPU and memory requests/limits for the worker (defaults are 0.25 CPU and
# 0.5Gi memory).
CPU=0.25
MEMORY=0.5Gi

# Application environment string
APP_ENV=production

# Message printed by the worker and the interval (in seconds) between
# prints.
MESSAGE=Hello from worker-service!
INTERVAL_SECONDS=10

# Minimum and maximum replicas and CPU utilisation threshold for
# scaling.  The worker scales between MIN_REPLICAS and MAX_REPLICAS based
# on CPU utilisation (percentage).  Defaults are 1–3 replicas with a
# 50% utilisation target【598188688273214†L836-L843】.
MIN_REPLICAS=1
MAX_REPLICAS=3
CPU_UTILIZATION=50

## Secret configuration

# Provide a Key Vault secret URI and user-assigned identity resource
# ID to fetch the database connection string from Key Vault.  If set,
# the deploy script will generate a Key Vault reference instead of
# embedding the secret value【209614643635596†L435-L505】.
# DB_SECRET_URI=https://<keyvault-name>.vault.azure.net/secrets/db-connection-string/<version>
# IDENTITY_RESOURCE_ID=/subscriptions/<sub>/resourceGroups/<rg>/providers/Microsoft.ManagedIdentity/userAssignedIdentities/<identity-name>

# Alternatively, provide a connection string directly (not recommended
# for production).  If both DB_SECRET_URI and DB_CONNECTION_STRING are
# omitted, the app will run without a database connection string.
# DB_CONNECTION_STRING=Server=tcp:...;Database=...;User ID=...;Password=...