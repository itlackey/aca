# Example configuration for create-resources.sh
#
# Copy this file to `.env` and customize the values before running
# `create-resources.sh`.  Names for Key Vaults, storage accounts and
# registries must be globally unique across Azure.  Choose a region close
# to your users.  Tags are optional but recommended for cost tracking.

# ---------------------------------------------------------------------------
# Subscription & resource group
# ---------------------------------------------------------------------------

# Optional: specify the Azure subscription to use.  If omitted, the
# currently selected subscription from `az account show` is used.
SUBSCRIPTION_ID=16a67f66-6e7c-4edb-a3cd-e0494f2bed4b

# Resource group where all platform infrastructure will be created.  For
# training, choose a per‑user group (e.g. rg-aca-platform-jdoe).  For
# production, pick something like rg-aca-platform-prod.
RESOURCE_GROUP=rg-aca-platform-demo

# Azure region (e.g. eastus, centralus, westeurope).  Must support
# Container Apps.
LOCATION=centralus

# ---------------------------------------------------------------------------
# Tagging (optional but recommended)
# ---------------------------------------------------------------------------

# Tags are applied to all resources for cost management and governance.
# Leave a variable empty to omit that tag.
TAG_ENVIRONMENT=dev
TAG_OWNER=platform-team
TAG_COST_CENTER=aca-platform-001

# ---------------------------------------------------------------------------
# Logging & Container Apps environment
# ---------------------------------------------------------------------------

# Log Analytics workspace name for Container Apps diagnostics.
WORKSPACE_NAME=aca-logs-demo

# Name of the Azure Container Apps environment.
ACA_ENVIRONMENT=aca-env-demo

# When INTERNAL_ONLY=true the environment is private (no public IP).  Set
# to false if you will expose public container apps or a reverse proxy.
INTERNAL_ONLY=false

# ---------------------------------------------------------------------------
# Networking (VNet + delegated subnet for ACA)
# ---------------------------------------------------------------------------

# Virtual network name
VNET_NAME=aca-vnet-demo
# CIDR block for the VNet; must be large enough to allocate subnets
VNET_ADDRESS_PREFIX=10.10.0.0/16
# Delegated subnet name for the Container Apps environment infrastructure
INFRA_SUBNET_NAME=aca-infra-subnet
# CIDR block for the delegated subnet (subset of the VNet CIDR)
INFRA_SUBNET_PREFIX=10.10.0.0/23
# Subnet for private endpoints (small, not delegated)
PE_SUBNET_NAME=aca-pe-subnet
PE_SUBNET_PREFIX=10.10.2.0/27

# ---------------------------------------------------------------------------
# Key Vault & storage
# ---------------------------------------------------------------------------

# Key Vault name (3–24 characters, letters and numbers only).  Must be globally
# unique.  Used to store your application secrets.
KEYVAULT_NAME=aca-kv-demo1234

# Storage account name (3–24 characters, lowercase letters and numbers only).
# Must be globally unique.  Used for diagnostics and general storage.
STORAGE_ACCOUNT_NAME=acasa$RANDOM
# Azure Files share name (optional, used for Caddy or shared config)
FILE_SHARE_NAME=caddyfiles
# Name used to register the share as environment storage
STORAGE_NAME=caddy-config

LIFECYCLE_ENABLE=true
LIFECYCLE_MOVE_TO_COOL_AFTER_DAYS=30
LIFECYCLE_DELETE_AFTER_DAYS=180

# ---------------------------------------------------------------------------
# Azure Container Registry
# ---------------------------------------------------------------------------

# Name of the Azure Container Registry.  Must be globally unique and
# adhere to ACR naming rules (5–50 lowercase alphanumeric characters).  A
# registry is created if it does not exist.
ACR_NAME=acaregdemo1234

# ACR SKU (Basic, Standard, Premium).  Standard is a good default.
ACR_SKU=Standard

# ---------------------------------------------------------------------------
# Managed identity for apps (optional but recommended)
# ---------------------------------------------------------------------------

# When true, a user‑assigned managed identity is created and granted
# permission to read secrets from Key Vault and pull images from the ACR.
CREATE_MANAGED_IDENTITY=true

# Name of the user‑assigned identity to create (if CREATE_MANAGED_IDENTITY is
# true).  Must be unique within the resource group.
USER_ASSIGNED_IDENTITY_NAME=aca-uami-demo

# When true, assign the built‑in “Key Vault Secrets User” role on the
# Key Vault to the managed identity.  Leave false if you wish to assign
# permissions manually.
ASSIGN_KV_ROLE=true
