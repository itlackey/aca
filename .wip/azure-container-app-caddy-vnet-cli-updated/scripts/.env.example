## Example environment configuration for create-resources.sh and deploy.sh
#
# Copy this file to `.env` and adjust the values to suit your deployment.
# The scripts source variables from `.env` and will error if required
# variables are missing.

# Name of the resource group to create or reuse
RESOURCE_GROUP=aca-caddy-demo

# Azure region for all resources
LOCATION=eastus

# Container Apps environment name
ACA_ENVIRONMENT=aca-env

# Virtual network and subnet configuration
VNET_NAME=aca-vnet
VNET_ADDRESS_PREFIX=10.10.0.0/16
# Infrastructure subnet for Container Apps (must be at least /23)
INFRA_SUBNET_NAME=aca-infra-subnet
INFRA_SUBNET_PREFIX=10.10.0.0/23
# Subnet for private endpoints (small, not delegated)
PE_SUBNET_NAME=aca-pe-subnet
PE_SUBNET_PREFIX=10.10.2.0/27

# Storage account used for container logs and Caddy configuration
# Must be globally unique, 3–24 characters, lowercase letters and digits
STORAGE_ACCOUNT_NAME=acacaddystorage
# Azure Files share name used for Caddy configuration
FILE_SHARE_NAME=caddyfiles
# Name used to register the share as environment storage
STORAGE_NAME=caddy-config

# Azure Key Vault and Container Registry
KEYVAULT_NAME=aca-kv
ACR_NAME=acacaddyregistry

# Container apps names
APP1_NAME=app1
APP2_NAME=app2
CADDY_APP_NAME=caddy-proxy

# Public domain configuration for Caddy automatic HTTPS
#
# PUBLIC_DOMAIN is the fully qualified domain name that will be routed
# to the Caddy reverse proxy.  Caddy uses this domain when issuing
# certificates via Let's Encrypt and when serving requests.  You must
# create a DNS record (CNAME or A) for this domain pointing at the
# Container Apps environment's external FQDN.  For example:
#   PUBLIC_DOMAIN=myapp.example.com
PUBLIC_DOMAIN=myapp.example.com

# LETS_ENCRYPT_EMAIL is the email address that Caddy provides to the
# certificate authority when registering for certificates.  Let's
# Encrypt requires a valid email so you can be notified about
# certificate expiration and important account events.  For example:
#   LETS_ENCRYPT_EMAIL=admin@example.com
LETS_ENCRYPT_EMAIL=admin@example.com

# Control whether the Container Apps environment is internal only.
# Set to true to prevent a public IP from being assigned.  In this
# case, only apps with external ingress will receive public traffic.
INTERNAL_ONLY=false

# Optional: create a user‑assigned managed identity for pulling from ACR
# and reading secrets from Key Vault.  When true, role assignments will
# also be performed.
CREATE_MANAGED_IDENTITY=true
# Name of the user‑assigned identity (only used if CREATE_MANAGED_IDENTITY=true)
USER_ASSIGNED_IDENTITY_NAME=aca-uami
# Assign Key Vault Secrets User role to the identity
ASSIGN_KV_ROLE=true
# SKU for the Azure Container Registry (Basic, Standard, Premium)
ACR_SKU=Standard

# Optional tagging for resources
TAG_ENVIRONMENT=dev
TAG_OWNER=your-name
TAG_COST_CENTER=12345

# Optional subscription ID.  If not set, the current default subscription is used.
#SUBSCRIPTION_ID=